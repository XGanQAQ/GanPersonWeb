@page "/"
<MudContainer Class="mt-10 px-8" MaxWidth="MaxWidth.Medium">
    <MudGrid>
        <MudItem xs="12" sm="9" md="9" id="主栏">
            <MudGrid Class="mb-6">
                <MudItem xs="12">
                    <MudPaper Elevation="3">
                        <MudImage ObjectFit="ObjectFit.Cover" Src="images/purple.png" Class="rounded-lg" Fluid />
                    </MudPaper>
                </MudItem>
            </MudGrid>
            <GanPersonWeb.Client.Component.DisplayProjects DisplayCount="2"/>
            <MudDivider DividerType="DividerType.Middle" Class="my-6" />
            <GanPersonWeb.Client.Component.DisplayBlogs DisplayCount="3"/>
        </MudItem>
        <MudHidden Breakpoint="Breakpoint.SmAndUp" Invert="true">
            <MudItem xs="12" sm="3" md="3" id="右侧边栏">
                <MudStack>
                    <GanPersonWeb.Client.Component.ShowPersonInfo />
                    @* 公告 *@
                    <GanPersonWeb.Client.Component.StandBillboard Title="公告" Content="个人博客正在建设中，敬请期待更多内容！" />

                    @* 站点信息 *@
                    <GanPersonWeb.Client.Component.ShowSiteInfo />
                </MudStack>
            </MudItem>
        </MudHidden>
    </MudGrid>
</MudContainer>

@code {
    [Inject]
    private ClientSiteVisitService clientSiteVisitService { get; set; } = default!;

    //在第一次加载的时候记录访问数据
    protected override async Task OnInitializedAsync()
    {
        // 记录访问数据
        if (clientSiteVisitService != null)
        {
            await clientSiteVisitService.RecordVisitAsync();
        }
    }
}
